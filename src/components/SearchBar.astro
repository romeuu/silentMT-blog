---
import { getLanguage } from "../utils/lang";

const language = getLanguage(Astro.url.pathname);
---

<input type="search" name="q" placeholder={`${language === 'en' ? 'Search...' : 'Buscar...'}`} id="searchInput" />

<script>
    const searchInput = document.getElementById('searchInput');
    
    if (searchInput) {
        searchInput.addEventListener('input', handleSearchInput);
    }

    function handleSearchInput(event) {
        event.preventDefault();
        const searchTerm = event.target.value.toLowerCase();
        document.dispatchEvent(new CustomEvent('search', { detail: searchTerm }));
    }
</script>